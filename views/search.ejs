<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/styles.css">
    
    <title>SEARCH RESULTS</title>
  </head>
  <body class="container-fluid main-container">
    <div class="back-button-divider">
        <a href="/"><button class="btn btn-secondary back-button" >BACK</button></a>
    </div>
    <div class="garbage-pit-header-container">
        <h3 class="garbage-pit-header">SEARCH RESULTS</h3>
    </div>
    <div class="search-clear">
      <form class="search" action="/search" method="POST">
        <div class="search-group">
            <input type="text" name="name" class="searchbar" placeholder="Search by Title" aria-label="Search" aria-describedby="search-addon" />
            <button type="submit" class="btn btn-primary">search</button>
        </div>
      </form>
  </div>
    <div class="movies-container">
        <% if (movieIndex.length === 0 || movieIndex === undefined) { %>
            <div class="no-results">
                <h4>MOVIE NOT IN DATABASE.</h4>
                <h4>IT MUST BE A GOOD MOVIE!</h4> 
                <h4>IF YOU DISAGREE...</h4>
                <a href="/new"><button class="btn btn-danger new-button">THROW IT IN THE PIT</button></a>
            </div>
        <% } else { %>
        <% for (let i=0; i < movieIndex.length; i++) { %>
            <a href="/<%=movieIndex[i]._id%>"><div class="index-tile">
                <img class="main-page-posters" src= <%=movieIndex[i].image%> >
                <div class="movie-tile-info">
                  <%= movieIndex[i].name %> (<%=movieIndex[i].year%>)
                </div>
                <div class ="movie-tile-tags">
                  <% for (let x = 0; x < movieIndex[i].tags.length; x++) { %>
                    <p class="movie-tile-tag-single"> <%=movieIndex[i].tags[x]%></p>
                  <% } %>
                </div>
            </div></a> 
        <% } } %>
    </div>
  </body>
</html>